<style>
    .addStudentForm,
    .tabtitle {
        margin-left: 20px;
    }

    .inputStudentField {
        width: 300px;
    }


    .fileUploadingArea{
        display: inline;
        justify-content: flex-end;
    }
</style>

<div class="tabContainer">

    <h2 class="mat-h2 tabtitle">Elenco studenti iscritti al corso.</h2>


    <form class="addStudentForm">
        <mat-form-field class="inputStudentField">
            <input type="text" placeholder="Add Student" aria-label="Number" matInput [formControl]="myControl"
                [matAutocomplete]="auto">
            <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete" [displayWith]="displayWith"
                (optionSelected)="autocompleteSelected($event.option.value)">
                <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                    {{option.firstName}} {{option.name}} ({{option.id}})
                </mat-option>
            </mat-autocomplete>
        </mat-form-field>
        <button mat-button (click)="addStudentEvent()">Add</button>
        <button mat-button color="warn" [disabled]="isDeleteButtonDisabled()" (click)="_deleteStudents()">Delete</button>
    </form>

    <div class="fileUploadingArea">
        <button mat-fab color="primary"
            aria-label="Example icon button with a delete icon"
            (click)="fileInput.click()">
            <mat-icon>folder</mat-icon>
            <input #fileInput type="file" (change)="onFileChanged($event)"
                style="display:none;" />
        </button>
        <mat-form-field>
            <mat-label>Add students</mat-label>
            <input matInput placeholder="No file selected" [(ngModel)]="fileName"
                readonly="true">
        </mat-form-field>

        <button id="uploadButton" [disabled]="isDisabled" mat-flat-button
            color="primary" (click)="onUpload()">Upload</button>

    </div>




    <table #table mat-table [dataSource]="enrolledStudentsDataSource" matSort class="mat-elevation-z8">

        <!-- ID Column -->
        <ng-container matColumnDef="id">
            <th mat-header-cell mat-sort-header *matHeaderCellDef> Id </th>
            <td mat-cell *matCellDef="let element"> {{element.id}} </td>
        </ng-container>

        <!-- Group Column -->
        <!-- Groups are not modelled yet, providing a default value. -->
        <ng-container matColumnDef="group">
            <th mat-header-cell mat-sort-header *matHeaderCellDef> Group </th>
            <td mat-cell *matCellDef="let element"> {{(element.group) || "---"}} </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
        </ng-container>

        <!-- First Name Column -->
        <ng-container matColumnDef="first name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> FirstName </th>
            <td mat-cell *matCellDef="let element"> {{element.firstName}} </td>
        </ng-container>

        <!-- Checkbox Column -->
        <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox (change)="$event ? masterToggle() : null"
                    [checked]="selection.hasValue() && isAllSelected()"
                    [indeterminate]="selection.hasValue() && !isAllSelected()">
                </mat-checkbox>
            </th>
            <td mat-cell *matCellDef="let row">
                <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                    [checked]="selection.isSelected(row)">
                </mat-checkbox>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
</div>